<!-- Searchs -->
<div class="card p-fluid">
  <p-panel header="CONFIGURAR UN NUEVO PROVEEDOR" [toggleable]="true">
    <!-- forms -->
    <form [formGroup]="nuevoProveedorForm" (ngSubmit)="onSubmit()">
      <div class="formgrid grid justify-content-end">
        <div class="field-col">
          <p-button
            label="Regresar"
            [raised]="true"
            [rounded]="true"
            [routerLink]="['/proveedores']"
          />
        </div>
        <div class="field-col ml-4 mr-5">
          <p-button
            label="Guardar"
            [raised]="true"
            [rounded]="true"
            severity="success"
          />
        </div>
      </div>

      <!-- Row 1 -->
      <div class="formgrid grid mt-4 col-12">

        <div class="field col-3">
          <p-dropdown
            [options]="typeDocument"
            formControlName="typeDocument"
            optionLabel="identification"
            placeholder="Seleccione una Identificación"
          />
        </div>

        <div class="field col-3 input-with-button">
          <p-floatLabel>
            <input
              pInputText
              type="number"
              pKeyFilter="alpha"
              class="ipt-required"
              id="numberDocument"
              formControlName="numberDocument"
              required
            />
            <label htmlFor="numberDocument" id="custom-pfloatLabel" class="w-10"
              >Numero de identificaci&oacute;n</label
            >
          </p-floatLabel>

          <p-button
            icon="pi pi-search"
            class="p-button-rounded p-button-text search-btn"
            (click)="showNumberDocumentDialog()"
          >
          </p-button>
        </div>
        <!-- Razon social/Nombre -->
        <div class="field col-3">
          <p-floatLabel>
            <input
              pInputText
              pKeyFilter="alpha"
              class="ipt-required"
              id="name"
              formControlName="name"
              required
            />
            <label htmlFor="name" id="custom-pfloatLabel" class="w-10"
              >Raz&oacute;n social / Nombre</label
            >
          </p-floatLabel>
        </div>
        <!-- Tipo de persona -->
        <div class="field col-3">
          <p-dropdown
            [options]="typePerson"
            formControlName="typePerson"
            optionLabel="typePerson"
            placeholder="Tipo de persona"
          />
        </div>
      </div>

      <!-- Row 2 -->
      <div class="formgrid grid col-12">

        <div class="field col-3">
          <p-dropdown
            [options]="typeProviders"
            formControlName="typeProviders"
            optionLabel="name"
            placeholder="Seleccione un proveedor"
          />
        </div>

        <div class="field col-3">
          <p-floatLabel>
            <input
              pInputText
              class="ipt-required"
              id="status"
              formControlName="status"
              [disabled]="true"
            />
            <label htmlFor="status" id="custom-pfloatLabel" class="w-10"
              >Activo</label
            >
          </p-floatLabel>
        </div>
      </div>
    </form>
    <div class="col-3">
      <!-- <p-button
    label="Seleccionar una Sede"
    [raised]="true"
    [rounded]="true"
    (click)="toggleTable()"
    /> -->
    </div>
  </p-panel>

  <div class="mt-4">
    <!-- Sección de Sedes-->
    <div>
      <p-panel header="CONFIGURACIÓN DE SEDES" [toggleable]="true" [collapsed]="true">
        <!-- forms -->
        <form [formGroup]="nuevoProveedorForm" (ngSubmit)="onSubmit()">
          <!-- Row 1 -->
          <div class="formgrid grid col-12">

            <div class="field col-3">
              <p-floatLabel>
                <input
                  pInputText
                  pKeyFilter="alpha"
                  class="ipt-required"
                  id="code"
                  formControlName="code"
                  required
                />
                <label htmlFor="code" id="custom-pfloatLabel" class="w-10"
                  >Codigo</label
                >
              </p-floatLabel>
            </div>

            <div class="field col-3">
              <p-floatLabel>
                <input
                  pInputText
                  pKeyFilter="alpha"
                  class="ipt-required"
                  id="name"
                  formControlName="name"
                  required
                />
                <label htmlFor="name" id="custom-pfloatLabel" class="w-10"
                  >Nombre/Raz&oacute;n social</label
                >
              </p-floatLabel>
            </div>

            <div class="field col-3">
              <p-floatLabel>
                <input
                  pInputText
                  pKeyFilter="alpha"
                  class="ipt-required"
                  id="address"
                  formControlName="address"
                  required
                />
                <label htmlFor="address" id="custom-pfloatLabel" class="w-10"
                  >Dirección</label
                >
              </p-floatLabel>
            </div>

            <div class="field col-3">
              <p-dropdown
                [options]="active"
                formControlName="active"
                optionLabel="name"
                placeholder="Activo"
              />
            </div>
          </div>
          <div class="formgrid grid col-12">

            <div class="field col-3">
              <p-dropdown
                [options]="sedePrincipal"
                formControlName="sedePrincipal"
                optionLabel="name"
                placeholder="Sede Principal"
              />
            </div>

            <div class="field col-3">
              <p-dropdown
                [options]="departaments"
                formControlName="departament"
                optionLabel="name"
                placeholder="Seleccione un departamento / provincia"
              />
            </div>

            <div class="field col-3">
              <p-dropdown
                [options]="cities"
                formControlName="city"
                optionLabel="city"
                placeholder="Seleccione una ciudad"
              />
            </div>
          </div>
        </form>

        <!-- Tabla de Sedes-->
        <p-table
          #dt1
          [value]="locations"
          [paginator]="true"
          [rows]="10"
          [rowsPerPageOptions]="[5, 10, 20, 100]"
          styleClass="p-datatable-gridlines"
          [tableStyle]="{ 'min-width': '50rem' }"
          [globalFilterFields]="[
            'code',
            'name',
            'address',
            'active',
            'sedePrincipal',
            'city',
            'departament',
            'locationMain'
          ]"
          [(selection)]="SelectedLocation"
          [rowHover]="true"
          dataKey="id"
          currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} datos"
          [showCurrentPageReport]="true"
        >
          <ng-template pTemplate="header">
            <tr>
              <!-- <th style="width: 4rem;">
              <p-tableHeaderCheckbox />
            </th> -->
              <th pSortableColumn="code" class="text-center">
                Codigo<p-sortIcon field="code"></p-sortIcon>
              </th>
              <th pSortableColumn="name" class="text-center">
                Nombre <p-sortIcon field="name"></p-sortIcon>
              </th>
              <th pSortableColumn="address" class="text-center">
                Direcci&oacute;n<p-sortIcon field="address"></p-sortIcon>
              </th>
              <th pSortableColumn="active" class="text-center">
                Activo<p-sortIcon field="active"></p-sortIcon>
              </th>
              <th pSortableColumn="sedePrincipal" class="text-center">
                Sede Principal<p-sortIcon field="sedePrincipal"></p-sortIcon>
              </th>
              <th pSortableColumn="city" class="text-center">
                Ciudad<p-sortIcon field="city"></p-sortIcon>
              </th>
              <th pSortableColumn="departament" class="text-center">
                Departamento<p-sortIcon field="departament"></p-sortIcon>
              </th>
              <th class="text-center">Acciones</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-locations>
            <tr>
              <!-- <td>
              <p-tableCheckbox [value]="proveedor" />
            </td> -->
              <td class="text-center">{{ locations.code }}</td>
              <td class="text-center">{{ locations.name }}</td>
              <td class="text-center">{{ locations.address }}</td>
              <td class="text-center">{{ locations.active }}</td>
              <td class="text-center">{{ locations.sedePrincipal }}</td>
              <td class="text-center">{{ locations.city }}</td>
              <td class="text-center">{{ locations.departament }}</td>
              <!-- <td class="text-center">{{ locations.locationMain }}</td> -->
              <td>
                <div class="flex justify-content-center align-items-center">
                  <p-button
                    icon="pi pi-search"
                    class="p-button-rounded p-button-text flex-1 custom-button"
                    [raised]="true"
                  >
                  </p-button>

                  <p-button
                    icon="pi pi-pencil"
                    severity="warning"
                    class="p-button-rounded p-button-text ml-2 flex-1"
                  >
                  </p-button>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-panel>

      <div class="mt-4">
        <!-- Sección de Especialidades-->
        <p-panel header="CONFIGURACIÓN DE ESPECIALIDADES " [toggleable]="true" [collapsed]="true">
          <!-- forms -->
          <form [formGroup]="nuevoProveedorForm" (ngSubmit)="onSubmit()">
            <!-- Row 1 -->
            <div class="formgrid grid mt-4 col-12">
              <div class="field col-3">
                <p-dropdown
                  [options]="typeProviders"
                  formControlName="typeProviders"
                  optionLabel="name"
                  placeholder="Tipo de proveedor"
                />
              </div>

              <div class="field col-3">
                <p-floatLabel>
                  <input
                    pInputText
                    pKeyFilter="alpha"
                    class="ipt-required"
                    id="name"
                    formControlName="name"
                    required
                  />
                  <label htmlFor="name" id="custom-pfloatLabel" class="w-10"
                    >Nombre/Raz&oacute;n social</label
                  >
                </p-floatLabel>
              </div>

              <div class="field col-3">
                <p-floatLabel>
                  <input
                    pInputText
                    pKeyFilter="alpha"
                    class="ipt-required"
                    id="address"
                    formControlName="address"
                    required
                  />
                  <label htmlFor="address" id="custom-pfloatLabel" class="w-10"
                    >Dirección</label
                  >
                </p-floatLabel>
              </div>

              <div class="field col-3">
                <p-dropdown
                  [options]="status"
                  formControlName="status"
                  optionLabel="status"
                  placeholder="Estado"
                />
              </div>
            </div>

            <!-- Row 2 -->
            <div class="formgrid grid col-12">
              <div class="field col-3">
                <p-dropdown
                  [options]="cities"
                  formControlName="city"
                  optionLabel="city"
                  placeholder="Seleccione una ciudad"
                />
              </div>

              <div class="field col-3">
                <p-dropdown
                  [options]="typeDocument"
                  formControlName="typeDocument"
                  optionLabel="identification"
                  placeholder="Seleccione una Identificación"
                />
              </div>
            </div>
          </form>

          <!-- Tabla de Sedes-->
          <p-table
            #dt1
            [value]="locations"
            [paginator]="true"
            [rows]="10"
            [rowsPerPageOptions]="[5, 10, 20, 100]"
            styleClass="p-datatable-gridlines"
            [tableStyle]="{ 'min-width': '50rem' }"
            [globalFilterFields]="[
              'code',
              'name',
              'address',
              'city',
              'departament',
              'active',
              'locationMain'
            ]"
            [(selection)]="SelectedLocation"
            [rowHover]="true"
            dataKey="id"
            currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} datos"
            [showCurrentPageReport]="true"
          >
            <ng-template pTemplate="header">
              <tr>
                <!-- <th style="width: 4rem;">
              <p-tableHeaderCheckbox />
            </th> -->
                <th pSortableColumn="code" class="text-center">
                  Codigo<p-sortIcon field="code"></p-sortIcon>
                </th>
                <th pSortableColumn="name" class="text-center">
                  Nombre <p-sortIcon field="name"></p-sortIcon>
                </th>
                <th pSortableColumn="address" class="text-center">
                  Direcci&oacute;n<p-sortIcon field="address"></p-sortIcon>
                </th>
                <th pSortableColumn="city" class="text-center">
                  Ciudad<p-sortIcon field="city"></p-sortIcon>
                </th>
                <th pSortableColumn="departament" class="text-center">
                  Departamento<p-sortIcon field="departament"></p-sortIcon>
                </th>
                <th pSortableColumn="active" class="text-center">
                  Activo<p-sortIcon field="active"></p-sortIcon>
                </th>
                <th class="text-center">Acciones</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-locations>
              <tr>
                <!-- <td>
              <p-tableCheckbox [value]="proveedor" />
            </td> -->
                <td class="text-center">{{ locations.code }}</td>
                <td class="text-center">{{ locations.name }}</td>
                <td class="text-center">{{ locations.address }}</td>
                <td class="text-center">{{ locations.city }}</td>
                <td class="text-center">{{ locations.departament }}</td>
                <td class="text-center">{{ locations.active }}</td>
                <td>
                  <div class="flex justify-content-center align-items-center">
                    <p-button
                      icon="pi pi-search"
                      class="p-button-rounded p-button-text flex-1 custom-button"
                      [raised]="true"
                    >
                    </p-button>
                    <p-button
                      icon="pi pi-pencil"
                      severity="warning"
                      class="p-button-rounded p-button-text ml-2 flex-1"
                    >
                    </p-button>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </p-panel>
      </div>
    </div>
  </div>


  <!-- Dialogo Numero documento -->
  <p-dialog
  [(visible)]="displaySearchDialog"
  header="Filtro B&uacute;squeda Proveedores"
  [modal]="true"
  [style]="{ width: '50vw' }"
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  >
  <!-- [formGroup]="filterSearchProviderForm" -->
    <form (ngSubmit)="onSubmit()">
      <!-- Contenido del modal -->
      <div class="p-fluid">
        <div class="p-field">

          <!-- Row 1 -->
          <div class="formgrid grid col-12">
            <div class="field col-6">
              <label for="typeProviders">Tipo de Persona</label>
              <p-dropdown
                [options]="typePerson"
                formControlName="typePerson"
                optionLabel="typePerson"
                placeholder="Tipo de persona"
              />
            </div>

            <div class="field col-6">
                <label for="numberDocument">Numero de identificaci&oacute;n</label>
                <input
                  pInputText
                  type="number"
                  class="ipt-required"
                  id="numberDocument"
                  formControlName="numberDocument"
                  required
                />
            </div>
          </div>

          <!-- Row 2 -->
          <div class="formgrid grid col-12">

            <div class="field col-6">
              <label for="typeDocument">Tipo de Identificaci&oacute;n</label>
              <p-dropdown
                [options]="typeDocument"
                formControlName="typeDocument"
                optionLabel="identification"
                placeholder="Seleccione una Identificación"
              />
            </div>

            <div class="field col-6">
              <label for="numberDocument">Nombre/Raz&oacute;n Social</label>
              <input
                pInputText
                type="text"
                class="ipt-required"
                id="name"
                formControlName="name"
              />
            </div>
          </div>

          <!-- Row 3 -->
          <div class="formgrid grid col-12">
            <div class="field col-6">
              <label for="typeProviders">Tipo de Proveedor</label>
              <p-dropdown
                [options]="typeProviders"
                formControlName="typeProviders"
                optionLabel="name"
                placeholder="Seleccione un proveedor"
              />
            </div>

            <div class="field col-6">
              <label for="numberDocument">Raz&oacute;n Comercial</label>
              <input
                pInputText
                type="text"
                class="ipt-required"
                id="razonComercial"
                formControlName="razonComercial"
              />
            </div>
          </div>

        </div>

        <!-- Aquí puedes agregar más contenido como una tabla de resultados o cualquier otro elemento -->
      </div>

      <!-- Table -->
      <!-- [value]="searchFilterProviders"
          [paginator]="true"
          [rows]="10"
          [rowsPerPageOptions]="[5, 10, 20, 100]"
          currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} datos"-->
      <p-table
        styleClass="p-datatable-gridlines"
        [tableStyle]="{ 'min-width': '50rem' }"
        [globalFilterFields]="[
          'numberDocument',
          'name',
          'typeProviders',
          'status',
        ]"
        [rowHover]="true"
        dataKey="id"
        [showCurrentPageReport]="true"
        emptyMessage = "No hay datos"
      >
        <ng-template pTemplate="header">
          <tr>
            <th class="text-center">
              Sele
            </th>
            <th class="text-center">
              N&uacute;mero de identificaci&oacute;n
            </th>
            <th class="text-center">
              Raz&oacute;n Social
            </th>
            <th class="text-center">
              Tipo Proveedor
            </th>
            <th class="text-center">
              Estado Proveedor
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-proveedor>
          <tr>
            <!-- <td><p-tableCheckbox/></td>
            <td>{{}}</td>
            <td>{{}}</td>
            <td>{{}}</td> -->
          </tr>

        </ng-template>

      </p-table>

      <p-footer>
        <div class="mt-4 flex justify-content-between w-full">
          <div>
            <button
              type="button"
              pButton
              label="Cerrar"
              icon="pi pi-times"
              class="p-button-danger"
              (click)="displaySearchDialog = false"
            ></button>
          </div>
          <div>
            <button
              severity="success"
              type="button"
              pButton
              label="Guardar"
              icon="pi pi-check"
              (click)="displaySearchDialog = false"
            ></button>
          </div>
        </div>
      </p-footer>
    </form>
  </p-dialog>
</div>
