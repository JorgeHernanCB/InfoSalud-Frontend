<!-- Searchs -->
<div class="mt-3">
  <p-panel header="CONFIGURAR NUEVO PROVEEDOR" [toggleable]="true">
    <!-- forms -->
    <form [formGroup]="nuevoProveedorForm" (ngSubmit)="onSubmit()">
      <div class="formgrid grid flex justify-content-between">
        <div class="field-col ml-4 p-1">
          <p-button
            icon="pi pi-step-backward"
            [rounded]="true"
            [text]="true"
            [raised]="true"
            [rounded]="true"
            pTooltip="Regresar"
            [routerLink]="['/proveedores']"
          />
        </div>
        <div class="field-col mr-5 p-1">
          <p-button
            icon="pi pi-save"
            [rounded]="true"
            [text]="true"
            [raised]="true"
            pTooltip="Guardar"
            tooltipPosition="left"
            type="submit"
          />
        </div>
      </div>

      <!-- Row 1 -->
      <div class="formgrid grid mt-4 col-12">
        <div class="field col-3">
          <p-floatLabel>
            <p-dropdown
              [options]="typeDocument"
              formControlName="typeDocument"
              optionLabel="identification"
              class="ipt-required"
              placeholder="Tipo de Identificación"
            />
            <label htmlFor="float-label">Tipo de Identificación</label>
          </p-floatLabel>
        </div>
        <!-- required -->
        <!-- class="ipt-required" -->

        <div class="field col-3 input-with-button">
          <p-floatLabel>
            <input
              pInputText
              type="number"
              class="ipt-required"
              id="numberDocument"
              formControlName="numberDocument"
            />
            <label htmlFor="numberDocument" id="custom-pfloatLabel" class="w-10"
              >N&uacute;mero de identificaci&oacute;n</label
            >
          </p-floatLabel>

          <p-button
            icon="pi pi-search"
            [text]="true"
            pTooltip="Buscar por identificación"
            tooltipPosition="top"
            class="p-button-rounded p-button-text search-btn"
            (click)="showNumberDocumentDialog()"
          >
          </p-button>
        </div>

        <!-- Razon social/Nombre -->
        <div class="field col-6">
          <p-floatLabel>
            <input
              pInputText
              id="name"
              class="ipt-disabled"
              formControlName="name"
            />
            <label htmlFor="name" id="custom-pfloatLabel" class="w-10"
              >Raz&oacute;n social / Nombre</label
            >
          </p-floatLabel>
        </div>
        <!-- [disabled]="true" -->
      </div>

      <!-- Row 2 -->
      <div class="formgrid grid col-12">
        <!-- Tipo de persona -->
        <div class="field col-3">
          <p-floatLabel>
            <p-dropdown
              [options]="typePerson"
              formControlName="typePerson"
              optionLabel="typePerson"
              placeholder="Tipo de persona"
            />
            <label for="float-label">Tipo de persona</label>
          </p-floatLabel>
        </div>

        <div class="field col-3">
          <p-floatLabel>
            <p-dropdown
              [options]="typeProviders"
              formControlName="typeProviders"
              optionLabel="name"
              placeholder="Proveedor"
            />
            <label for="float-label">Tipo de Proveedor</label>
          </p-floatLabel>
        </div>

        <div class="field col-3">
          <p-floatLabel>
            <input
              pInputText
              id="status"
              formControlName="status"
              class="ipt-disabled"
            />
            <label htmlFor="status" id="custom-pfloatLabel" class="w-10"
              >Activo</label
            >
          </p-floatLabel>
        </div>
      </div>
    </form>
    <div class="col-3"></div>
  </p-panel>

  <div
    class="card flex justify-content-center loading-indicator"
    *ngIf="loading"
  >
    <p-progressSpinner
      styleClass="w-4rem h-4rem"
      strokeWidth="8"
      fill="transparent"
      animationDuration=".5s"
    />
  </div>

  <!-- Sección de Sedes-->
  <div class="mt-3">
    <p-panel
      header="CONFIGURACIÓN DE SEDES"
      [toggleable]="true"
      [collapsed]="true"
    >
      <div class="formgrid grid justify-content-end mb-4">
        <div class="field-col ml-4 mr-5 p-1">
          <p-button
            [rounded]="true"
            [text]="true"
            [raised]="true"
            icon="pi pi-plus"
            pTooltip="Agregar Sede"
            tooltipPosition="left"
            (onClick)="openNewSedes()"
          />
        </div>
      </div>

      <!-- Tabla de Sedes-->
      <p-table
        #dt1
        [value]="locations"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20, 100]"
        styleClass="p-datatable-gridlines p-datatable-sm"
        [tableStyle]="{ 'min-width': '50rem' }"
        [globalFilterFields]="[
          'code',
          'name',
          'address',
          'active',
          'principalSede',
          'city',
          'departament',
          'locationMain'
        ]"
        [(selection)]="SelectedLocation"
        [rowHover]="true"
        dataKey="id"
        currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} datos"
        [showCurrentPageReport]="true"
      >
        <ng-template pTemplate="header">
          <tr>
            <!-- <th style="width: 4rem;">
              <p-tableHeaderCheckbox />
            </th> -->
            <th pSortableColumn="code" class="text-center">
              Codigo<p-sortIcon field="code"></p-sortIcon>
            </th>
            <th pSortableColumn="name" class="text-center">
              Nombre <p-sortIcon field="name"></p-sortIcon>
            </th>
            <th pSortableColumn="address" class="text-center">
              Direcci&oacute;n<p-sortIcon field="address"></p-sortIcon>
            </th>
            <th pSortableColumn="active" class="text-center">
              Activo<p-sortIcon field="active"></p-sortIcon>
            </th>
            <th pSortableColumn="principalSede" class="text-center">
              Sede Principal<p-sortIcon field="sedePrincipal"></p-sortIcon>
            </th>
            <th pSortableColumn="city" class="text-center">
              Ciudad<p-sortIcon field="city"></p-sortIcon>
            </th>
            <th pSortableColumn="departament" class="text-center">
              Departamento<p-sortIcon field="departament"></p-sortIcon>
            </th>
            <!-- <th class="text-center">Acciones</th> -->
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-locations>
          <tr>
            <!-- <td>
              <p-tableCheckbox [value]="proveedor" />
            </td> -->
            <td class="text-center">{{ locations.code }}</td>
            <td class="text-center">{{ locations.name }}</td>
            <td class="text-center">{{ locations.address }}</td>
            <td class="text-center">{{ locations.activo }}</td>
            <td class="text-center">{{ locations.principalSede }}</td>
            <td class="text-center">{{ locations.city }}</td>
            <td class="text-center">{{ locations.departament }}</td>
            <!-- <td class="text-center">{{ locations.locationMain }}</td> -->
            <!-- <td>
                <div class="flex justify-content-center align-items-center">
                  <p-button
                    icon="pi pi-search"
                    class="p-button-rounded p-button-text flex-1 custom-button"
                    [raised]="true"
                  >
                  </p-button>

                  <p-button
                    icon="pi pi-pencil"
                    severity="warning"
                    class="p-button-rounded p-button-text ml-2 flex-1"
                  >
                  </p-button>
                </div>
              </td> -->
          </tr>
        </ng-template>
      </p-table>
    </p-panel>
  </div>

  <!-- Sección de Especialidades-->
  <div class="mt-3">
    <p-panel
      header="CONFIGURACIÓN DE ESPECIALIDADES "
      [toggleable]="true"
      [collapsed]="true"
    >
      <div class="formgrid grid justify-content-end mb-4">
        <div class="field-col ml-4 mr-5 p-1">
          <p-button
            icon="pi pi-plus"
            [rounded]="true"
            [text]="true"
            [raised]="true"
            pTooltip="Agregar Especialidad"
            tooltipPosition="left"
            (onClick)="openNewSpecials()"
          />
        </div>
      </div>

      <!-- Tabla de Especialidades-->
      <p-table
        #dt1
        [value]="specials"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20, 100]"
        styleClass="p-datatable-gridlines p-datatable-sm"
        [tableStyle]="{ 'min-width': '50rem' }"
        [globalFilterFields]="['code', 'name']"
        [(selection)]="SelectedSpecial"
        [rowHover]="true"
        dataKey="id"
        currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} datos"
        [showCurrentPageReport]="true"
      >
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="code" class="text-center">
              Codigo<p-sortIcon field="code"></p-sortIcon>
            </th>
            <th pSortableColumn="name" class="text-center">
              Especialidad <p-sortIcon field="name"></p-sortIcon>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-specials>
          <tr>
            <td class="text-center">{{ specials.code }}</td>
            <td class="text-center">{{ specials.name }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-panel>
  </div>
</div>

<!-- Botones del servicio -->
<div class="w-full">
  <div
    class="formgrid grid flex justify-content-between items-center mt-4 w-full"
  >
    <div class="field-col ml-4 p-1">
      <p-button
        icon="pi pi-times"
        [text]="true"
        [raised]="true"
        [rounded]="true"
        pTooltip="Cancelar"
        tooltipPosition="right"
        (click)="showConfirmCancelar()"
      />
    </div>

    <div class="field-col flex gap-2">
      <p-button
        icon="pi pi-arrow-circle-up"
        [rounded]="true"
        [text]="true"
        [raised]="true"
        pTooltip="Servicios Habilitados"
        tooltipPosition="left"
        (click)="openUploadDialog()"
      >
      </p-button>

      <p-button
        icon="pi pi-save"
        [text]="true"
        [raised]="true"
        [rounded]="true"
        pTooltip="Guardar Proveedor"
        tooltipPosition="left"
      />
    </div>
  </div>
</div>

<!-- Dialogo Numero documento -->
<p-dialog
  [(visible)]="displaySearchDialog"
  header="Filtro B&uacute;squeda Proveedores"
  [modal]="true"
  [style]="{ width: '70vw' }"
  [closable]="true"
  dismissableMask="true"
  [draggable]="false"
  [resizable]="false"
>
  <form [formGroup]="nuevoProveedorForm" (ngSubmit)="onSubmit()">
    <!-- Contenido del modal -->
    <div class="p-fluid">
      <div class="p-field">
        <!-- Row 1 -->
        <div class="formgrid grid col-12 mt-3">
          <div class="field col-6">
            <p-floatLabel>
              <p-dropdown
                [options]="typeDocument"
                formControlName="typeDocument"
                optionLabel="identification"
                inputId="float-label"
                placeholder="Identificación"
              />
              <label htmlFor="float-label">Tipo de Identificación</label>
            </p-floatLabel>
          </div>

          <div class="field col-6">
            <p-floatLabel>
              <input pInputText id="number" formControlName="numberDocument" />
              <label
                htmlFor="numberDocument"
                id="custom-pfloatLabel"
                class="w-10"
                >N&uacute;mero de identificaci&oacute;n</label
              >
            </p-floatLabel>
          </div>
        </div>

        <!-- Row 2 -->
        <div class="formgrid grid col-12">
          <div class="field col-6">
            <p-floatLabel>
              <input
                pInputText
                id="name"
                formControlName="name"
                [disabled]="true"
              />
              <label htmlFor="name" id="custom-pfloatLabel" class="w-10"
                >Nombre / Raz&oacute;n Social</label
              >
            </p-floatLabel>
          </div>
          <div class="field col-6">
            <p-floatLabel>
              <p-dropdown
                [options]="typePerson"
                formControlName="typePerson"
                optionLabel="typePerson"
                placeholder="Tipo de persona"
              />
              <label for="float-label">Tipo de persona</label>
            </p-floatLabel>
          </div>
        </div>
      </div>
    </div>

    <!-- Table -->
    <p-table
      styleClass="p-datatable-gridlines p-datatable-sm"
      [tableStyle]="{ 'min-width': '50rem' }"
      [rowHover]="true"
      dataKey="id"
      [showCurrentPageReport]="true"
      emptyMessage="No hay datos"
      [globalFilterFields]="['typeDocument', 'numberDocument', 'name']"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="text-center">Sel</th>
          <th class="text-center">Tipo de identificaci&oacute;n</th>
          <th class="text-center">N&uacute;mero de identificaci&oacute;n</th>
          <th class="text-center">Raz&oacute;n Social</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-proveedor>
        <tr>
          <td><p-tableCheckbox /></td>
          <td>Cedula de ciudadania</td>
          <td>12326454647483485636374</td>
          <td>
            Ejecutivo del Cafe enfocado en el desarrollo sustentable para las
            familias de bajo recurso en todo el corregimiento del Valle
          </td>
        </tr>
      </ng-template>
    </p-table>

    <p-footer>
      <div class="mt-4 flex justify-content-between w-full">
        <div>
          <button
            icon="pi pi-times-circle"
            pButton
            [rounded]="true"
            [text]="true"
            [raised]="true"
            type="button"
            pTooltip="Cancelar"
            (click)="displaySearchDialog = false"
          ></button>
        </div>
        <div>
          <button
            icon="pi pi-check"
            pButton
            [rounded]="true"
            [raised]="true"
            [text]="true"
            type="button"
            pTooltip="Aceptar"
            (click)="displaySearchDialog = false"
          ></button>
        </div>
      </div>
    </p-footer>
  </form>
</p-dialog>

<!-- Modal para el uploadFile -->
<!-- [width]="400" -->
  <p-dialog
    header="Subir Archivo"
    [(visible)]="displayUploadDialog"
    [modal]="true"
    [closable]="true"
    [resizable]="false"
    [style]="{ width: '30vw' }"
    [draggable]="false"
    [responsive]="true"
    [baseZIndex]="10000"
    (onHide)="onDialogHide()"
  >
  <div class="mt-4">
    <p-fileUpload
      mode="basic"
      name="file"
      url="your-backend-api-url/upload"
      accept="image/*"
      maxFileSize="1000000"
      (onUpload)="onUpload($event)"
      chooseLabel="Seleccionar archivo"
      class="upload-button"
    ></p-fileUpload>
  </div>

  <p-footer>
    <button
      icon="pi pi-times"
      [raised]="true"
      [rounded]="true"
      type="button"
      pButton
      label="Cerrar"
      pTooltip="Cerrar"
      tooltipPosition="top"
      (click)="displayUploadDialog = false"
    ></button>
  </p-footer>
</p-dialog>

<!-- Dialogo para agregar una sede -->
<p-dialog
  [(visible)]="addSedeDialog"
  [modal]="true"
  [style]="{ width: '600px' }"
  dismissableMask="true"
  header="Agregar una nueva sede"
  styleClass="p-fluid"
>
  <ng-template pTemplate="content">
    <!-- [formGroup]="addSedesForm" -->
    <form [formGroup]="sedesForm">
      <div class="formgrid grid col-12 mt-4">
        <div class="field col-6">
          <p-floatLabel>
            <input pInputText id="sede" formControlName="sede" />
            <label htmlFor="sede" id="custom-pfloatLabel" class="w-10"
              >Nombre</label
            >
          </p-floatLabel>
          <!-- <small class="p-error" *ngIf="submitted && proveedorsForm.controls['typePerson'].invalid">
            Nombre/Razon social es requerido
            </small> -->
        </div>
        <div class="field col-6">
          <p-floatLabel>
            <input pInputText id="address" formControlName="address" />
            <label htmlFor="name" id="custom-pfloatLabel" class="w-10"
              >Direcci&oacute;n</label
            >
          </p-floatLabel>
        </div>
      </div>
      <div class="formgrid grid col-12">
        <div class="field col-6">
          <p-floatLabel>
            <p-dropdown
              [options]="activo"
              formControlName="activo"
              optionLabel="name"
              placeholder="Activo"
            />
            <label htmlFor="float-label" id="custom-pfloatLabel" class="w-10"
              >Activo</label
            >
          </p-floatLabel>
        </div>

        <div class="field col-6">
          <p-floatLabel>
            <p-dropdown
              [options]="departaments"
              formControlName="departament"
              appendTo="body"
              optionLabel="name"
              placeholder="Departamento"
            />
            <label htmlFor="float-label" id="custom-pfloatLabel" class="w-10"
              >Departamento</label
            >
          </p-floatLabel>
        </div>
      </div>
      <!-- Row 3 -->
      <div class="formgrid grid col-12">
        <div class="field col-6">
          <p-floatLabel>
            <p-dropdown
              [options]="cities"
              appendTo="body"
              formControlName="city"
              optionLabel="city"
              placeholder="Ciudad"
            />
            <label htmlFor="float-label" id="custom-pfloatLabel" class="w-10"
              >Ciudad</label
            >
          </p-floatLabel>
        </div>
      </div>
    </form>
  </ng-template>

  <ng-template pTemplate="footer">
    <div class="formgrid grid flex justify-content-between">
      <div class="field-col ml-4 p-1">
        <p-button
          icon="pi pi-times-circle"
          [text]="true"
          [raised]="true"
          [rounded]="true"
          class="p-button-custom"
          pTooltip="Cancelar"
          tooltipPosition="top"
          (onClick)="onSedeHide()"
        />
      </div>
      <div class="field-col mr-5 p-1">
        <p-button
          icon="pi pi-check"
          [rounded]="true"
          [text]="true"
          [raised]="true"
          class="p-button-custom"
          pTooltip="Agregar"
          tooltipPosition="left"
        />
      </div>
    </div>
  </ng-template>
</p-dialog>

<!-- Dialogo para agregar una especialidad -->
<p-dialog
  [(visible)]="addSpecialDialog"
  [style]="{ width: '600px' }"
  dismissableMask="true"
  header="Agregar una nueva especialidad"
  [modal]="true"
  styleClass="p-fluid"
>
  <ng-template pTemplate="content">
    <!-- [formGroup]="addSedesForm" -->
    <form [formGroup]="specialForm">
      <div class="formgrid grid col-12 mt-4">
        <div class="field col-6">
          <p-floatLabel>
            <input pInputText type="number" id="code" formControlName="code" />
            <label htmlFor="code" id="custom-pfloatLabel" class="w-10"
              >Codigo</label
            >
          </p-floatLabel>
          <!-- <small class="p-error" *ngIf="submitted && proveedorsForm.controls['typePerson'].invalid">
        Codigo es requerido
        </small> -->
        </div>

        <div class="field col-6">
          <p-floatLabel>
            <input pInputText id="specialidad" formControlName="specialidad" />
            <label htmlFor="specialidad" id="custom-pfloatLabel" class="w-10"
              >Especialidad</label
            >
          </p-floatLabel>
          <!-- <small class="p-error" *ngIf="submitted && proveedorsForm.controls['numberDocument'].invalid">
        Direccion es requerido
        </small> -->
        </div>
      </div>
    </form>
  </ng-template>

  <ng-template pTemplate="footer">
    <div class="formgrid grid flex justify-content-between">
      <div class="field-col ml-5 p-1">
        <p-button
          icon="pi pi-times-circle"
          [raised]="true"
          [rounded]="true"
          [text]="true"
          class="p-button-custom"
          pTooltip="Cancelar"
          (onClick)="onSpecialHide()"
        />
      </div>
      <div class="field-col mr-5">
        <p-button
          icon="pi pi-check"
          [text]="true"
          [raised]="true"
          [rounded]="true"
          class="p-button-custom"
          pTooltip="Agregar"
        />
      </div>
    </div>
  </ng-template>
</p-dialog>

<p-confirmDialog
  [style]="{ width: '450px' }"
  [acceptLabel]="'Sí'"
  [rejectLabel]="'No'"
></p-confirmDialog>

<!-- Dialogo para Cancelar -->
<!-- <p-confirmDialog
  header="Confirmación"
  icon="pi pi-exclamation-triangle"
  [acceptLabel]="'Aceptar'"
  [rejectLabel]="'Cancelar'"
  (onAccept)="onAcceptCancelar()"
  (onReject)="onRejectCancelar()"
></p-confirmDialog> -->
