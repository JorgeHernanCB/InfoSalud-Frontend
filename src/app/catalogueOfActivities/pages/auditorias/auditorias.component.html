<!-- BUSQUEDA DE AUDITORIAS -->
<div class="mt-3">
    <form [formGroup]="auditorsForm" (ngSubmit)="onSubmit()">
        <p-panel header="BUSCAR AUDITORIAS" toggleable="true">
            <app-filtered-button
                (onSearch)="onSearch()"
                (onClear)="clearForm()"
            ></app-filtered-button>

            <div class="formgrid mt-5 grid custom-col-extend">

                <!-- Numero auditoria -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="numberAuditoria"
                          type="number"
                          formControlName="numberAuditoria"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >N&uacute;mero de Auditor&iacute;a
                        </label>
                    </p-floatLabel>
                </div>

                <!-- Tipo de auditoria -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-dropdown
                        [options]="typeAuditoria"
                        formControlName="typeAuditoria"
                        optionLabel="type"
                        inputId="float-label"
                        placeholder="Tipo Auditoría"
                      />
                      <label for="float-label" id="custom-pfloatLabel" class="custom-w">Tipo Auditor&iacute;a</label>
                    </p-floatLabel>
                </div>

                <!-- Estado -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-dropdown
                        [options]="state"
                        formControlName="state"
                        optionLabel="state"
                        inputId="float-label"
                        placeholder="Estado"
                      />
                      <label for="float-label" id="custom-pfloatLabel" class="custom-w">Estado</label>
                    </p-floatLabel>
                </div>

                <!-- Numero ID Auditor -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="numberIdentificationAuditor"
                          type="number"
                          formControlName="numberIdentificationAuditor"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >N&uacute;mero Identificaci&oacute;n Auditor
                        </label>
                      </p-floatLabel>
                </div>
            </div>

            <!-- Row 2 -->
            <div class="formgrid mt-3 grid custom-col-extend">

                <!-- NIT IPS -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="nitProvider"
                          type="number"
                          formControlName="nitProvider"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >NIT IPS
                        </label>
                    </p-floatLabel>
                </div>

                <!-- Departamento -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-dropdown
                        [options]="departament"
                        formControlName="departament"
                        optionLabel="departament"
                        inputId="float-label"
                        placeholder="Departamento"
                      />
                      <label for="float-label" id="custom-pfloatLabel" class="custom-w">Departamento</label>
                    </p-floatLabel>
                </div>

                <!-- Ciudad -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-dropdown
                        [options]="city"
                        formControlName="city"
                        optionLabel="city"
                        inputId="float-label"
                        placeholder="Ciudad"
                      />
                      <label for="float-label" id="custom-pfloatLabel" class="custom-w">Ciudad</label>
                    </p-floatLabel>
                </div>

                <!-- Ramo -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-dropdown
                        [options]="ramo"
                        formControlName="ramo"
                        optionLabel="ramo"
                        inputId="float-label"
                        placeholder="Ramo"
                      />
                      <label for="float-label" id="custom-pfloatLabel" class="custom-w">Ramo</label>
                    </p-floatLabel>
                </div>
            </div>

             <!-- Row 3 -->
            <div class="formgrid mt-3 grid custom-col-extend">
                
                <!-- Numero siniestro -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="numberAccident"
                          type="number"
                          formControlName="numberAccident"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >N&uacute;mero Siniestro
                        </label>
                    </p-floatLabel>
                </div>

                <!-- Numero poliza -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="numberPolicy"
                          type="number"
                          formControlName="numberPolicy"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >N&uacute;mero P&oacute;liza
                        </label>
                    </p-floatLabel>
                </div>

                <!-- Numero autorizacion -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="numberAuthorization"
                          type="number"
                          formControlName="numberAuthorization"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >N&uacute;mero P&oacute;liza
                        </label>
                    </p-floatLabel>
                </div>

                <!-- Numero factura -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                          pInputText
                          id="numberFacture"
                          type="number"
                          formControlName="numberFacture"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                          >N&uacute;mero Factura
                        </label>
                    </p-floatLabel>
                </div>
            </div>

            <!-- Row 4 -->
            <div class="formgrid mt-3 grid custom-col-extend">

                <!-- Placa -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                            pInputText
                            id="plate"
                            type="text"
                            formControlName="plate"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                            >N&uacute;mero Factura
                        </label>
                    </p-floatLabel>
                </div>

                <div class="field custom-col">

                </div>

                <div class="field custom-col">

                </div>

                <!-- Usuario -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                            pInputText
                            id="user"
                            type="text"
                            class="ipt-disabled"
                            formControlName="user"
                            [disabled]="true"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                            >Usuario
                        </label>
                    </p-floatLabel>
                </div>
            
            </div>
        </p-panel>

        <p-panel header="FILTRO POR FECHAS" [toggleable]="true" styleClass="mt-3">

            <!-- Row 1 -->
            <div class="formgrid grid mt-3 custom-col-extend">

                <!-- Auditoria inicial -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-calendar
                        formControlName="dateAuditinitial"
                        [showIcon]="true"
                        inputId="icondisplay"
                       [iconDisplay]="'input'"
                      />
                      <label
                        htmlFor="float-label"
                        id="custom-pfloatLabel"
                        class="custom-w"
                        >Fecha Auditor&iacute;a Inicial
                      </label>
                    </p-floatLabel>
                </div>

                <!-- Auditoria final -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-calendar
                        formControlName="dateAuditEnd"
                        [showIcon]="true"
                        inputId="icondisplay"
                       [iconDisplay]="'input'"
                      />
                      <label
                        htmlFor="float-label"
                        id="custom-pfloatLabel"
                        class="custom-w"
                        >Fecha Auditor&iacute;a Final
                      </label>
                    </p-floatLabel>
                </div>

                <!-- Siniestro Inicial -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-calendar
                        formControlName="dateAccidentInitial"
                        [showIcon]="true"
                        inputId="icondisplay"
                       [iconDisplay]="'input'"
                      />
                      <label
                        htmlFor="float-label"
                        id="custom-pfloatLabel"
                        class="custom-w"
                        >Fecha Siniestro Inicial
                      </label>
                    </p-floatLabel>
                </div>

                <!-- Siniestro Final -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-calendar
                        formControlName="dateAccidentEnd"
                        [showIcon]="true"
                        inputId="icondisplay"
                       [iconDisplay]="'input'"
                      />
                      <label
                        htmlFor="float-label"
                        id="custom-pfloatLabel"
                        class="custom-w"
                        >Fecha Siniestro Final
                      </label>
                    </p-floatLabel>
                </div>
            </div>

            <!-- Row 2 -->
            <div class="formgrid grid mt-3 custom-col-extend">


                <!-- Autorizacion Inicial -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-calendar
                        formControlName="dateAuthorizationInitial"
                        [showIcon]="true"
                        inputId="icondisplay"
                       [iconDisplay]="'input'"
                      />
                      <label
                        htmlFor="float-label"
                        id="custom-pfloatLabel"
                        class="custom-w"
                        >Fecha Autorizaci&oacute;n Inicial
                      </label>
                    </p-floatLabel>
                </div>

                <!-- Autorizacion Final -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-calendar
                        formControlName="dateAuthorizationEnd"
                        [showIcon]="true"
                        inputId="icondisplay"
                       [iconDisplay]="'input'"
                      />
                      <label
                        htmlFor="float-label"
                        id="custom-pfloatLabel"
                        class="custom-w"
                        >Fecha Autorizaci&oacute;n Final
                      </label>
                    </p-floatLabel>
                </div>
            </div>

        </p-panel>

        <p-panel header="FILTRO POR PACIENTE" [toggleable]="true" styleClass="mt-3">

            <!-- Row 1 -->
            <div class="formgrid mt-3 grid custom-col-extend">

                <!-- Tipo de identificacion -->
                <div class="field custom-col">
                    <p-floatLabel>
                      <p-dropdown
                        [options]="typeDocument"
                        formControlName="typeDocument"
                        optionLabel="type"
                        inputId="float-label"
                        placeholder="Tipo de identificacion"
                      />
                      <label for="float-label" id="custom-pfloatLabel" class="custom-w">Tipo de Identificaci&oacute;n</label>
                    </p-floatLabel>
                </div>

                <!-- Numero de documento -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                            pInputText
                            id="numberIdentificationPerson"
                            type="number"
                            formControlName="numberIdentificationPerson"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                            >N&uacute;mero de Identificaci&oacute;n
                        </label>
                    </p-floatLabel>
                </div>

                <!-- Nombre -->
                <div class="field custom-col">
                    <p-floatLabel>
                        <input
                            pInputText
                            id="namePerson"
                            type="text"
                            formControlName="namePerson"
                        />
                        <label htmlFor="float-label" id="custom-pfloatLabel" class="custom-w"
                            >Nombre
                        </label>
                    </p-floatLabel>
                </div>

            </div>

        </p-panel>
    </form>

    <p-panel header="AUDITORÍAS ENCONTRADAS" [toggleable] = "true" styleClass="mt-3">
        <p-table
        #dt10
        [value]="auditorias"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20, 100]"
        styleClass="p-datatable-gridlines p-datatable-sm"
        [tableStyle]="{ 'min-width': '45rem' }"
        [globalFilterFields]="[
          'codeAuditor',
          'assignedAuditor',
          'typeAuditoria',
          'provider_ips',
          'numberAccident',
          'ramo',
          'numberFacture',
          'numberAuthorization',
          'dateAssigned',
          'departament',
          'city',
          'state',
        ]"
        [rowHover]="true"
        dataKey="id"
        currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} datos"
        [showCurrentPageReport]="true"
        emptyMessage="No hay datos"
      >
        <ng-template pTemplate="header">
          <tr>
            <!-- <th style="width: 4rem;">
              <p-tableHeaderCheckbox />
            </th> -->
            <th pSortableColumn="codeAuditor"
                class="text-center p-table-title"
                style="width: 100px;">
                C&oacute;digo Auditor&iacute;a
                <p-sortIcon field="codeAuditor"></p-sortIcon>
            </th>
            <th pSortableColumn="assignedAuditor"
                class="text-center p-table-title"
                style="width: 100px;">
                Auditor Asignado
                <p-sortIcon field="assignedAuditor"></p-sortIcon>
            </th>
            <th pSortableColumn="typeAuditoria"
                class="text-center p-table-title"
                style="width: 100px;">
                Tipo Auditor&iacute;a
                <p-sortIcon field="typeAuditoria"></p-sortIcon>
            </th>
            <th pSortableColumn="provider_ips"
                class="text-center p-table-title"
                style="width: 50px;">
                Proveedor/IPS
                <p-sortIcon field="provider_ips"></p-sortIcon>
            </th>
            <th pSortableColumn="numberAccident"
                class="text-center p-table-title"
                style="width: 100px;">
                N&uacute;mero Siniestro
                <p-sortIcon field="numberAccident"></p-sortIcon>
            </th>
            <th pSortableColumn="ramo"
                class="text-center p-table-title"
                style="width: 100px;">
                Ramo
                <p-sortIcon field="ramo"></p-sortIcon>
            </th>
            <th pSortableColumn="numberFacture"
                class="text-center p-table-title"
                style="width: 100px;">
                N&uacute;mero Factura
                <p-sortIcon field="numberFacture"></p-sortIcon>
            </th>
            <th pSortableColumn="numberAuthorization"
                class="text-center p-table-title"
                style="width: 100px;">
                N&uacute;mero Autorizaci&oacute;n
                <p-sortIcon field="numberAuthorization"></p-sortIcon>
            </th>
            <th pSortableColumn="dateAssigned"
                class="text-center p-table-title"
                style="width: 100px;">
                Fecha Asignaci&oacute;n
                <p-sortIcon field="dateAssigned"></p-sortIcon>
            </th>
            <th pSortableColumn="numberAuthorization"
                class="text-center p-table-title"
                style="width: 100px;">
                N&uacute;mero Autorizaci&oacute;n
                <p-sortIcon field="numberAuthorization"></p-sortIcon>
            </th>
            <th pSortableColumn="departament"
                class="text-center p-table-title"
                style="width: 150px;">
                Departamento Auditor&iacute;a
                <p-sortIcon field="departament"></p-sortIcon>
            </th>
            <th pSortableColumn="city"
                class="text-center p-table-title"
                style="width: 150px;">
                Ciudad Auditor&iacute;a
                <p-sortIcon field="city"></p-sortIcon>
            </th>
            <th pSortableColumn="state"
                class="text-center p-table-title"
                style="width: 150px;">
                Estado Auditor&iacute;a
                <p-sortIcon field="state"></p-sortIcon>
            </th>
            <th class="text-center p-table-title"
              style="width:50px">Acciones
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-auditor>
          <tr>
            <!-- <td>
              <p-tableCheckbox [value]="proveedor" />
            </td> -->
            <td class="text-center">{{ auditor.codeAuditor }}</td>
            <td class="text-center">{{ auditor.assignedAuditor }}</td>
            <td class="text-center">{{ auditor.typeAuditoria }}</td>
            <td class="text-center">{{ auditor.provider_ips }}</td>
            <td class="text-center">{{ auditor.numberAccident }}</td>
            <td class="text-center">{{ auditor.ramo }}</td>
            <td class="text-center">{{ auditor.numberFacture }}</td>
            <td class="text-center">{{ auditor.numberAuthorization }}</td>
            <td class="text-center">{{ auditor.dateAssigned }}</td>
            <td class="text-center">{{ auditor.departament }}</td>
            <td class="text-center">{{ auditor.city }}</td>
            <td class="text-center">{{ auditor.state }}</td>
            <td class="text-center">
              <div class="flex justify-content-center align-items-center">
                <!-- (click)="editProveedor(proveedor)" -->
                <!-- (click)="showProveedor(proveedor)" -->
                <p-button
                  icon="pi pi-search"
                  [rounded]="true"
                  [text]="true"
                  pTooltip="Buscar"
                  tooltipPosition="top"
                  class="p-button-rounded flex-1"
                  [state]="{ auditor: auditor}"
                  [routerLink]="['/auditorias/mostrar', auditor.id]"
                >
                </p-button>
                <!-- (click)="editProveedor(proveedor)" -->
                <p-button
                  icon="pi pi-pencil"
                  [rounded]="true"
                  [text]="true"
                  pTooltip="Editar"
                  tooltipPosition="top"
                  class="p-button-rounded flex-1"
                  [state]="{ auditor: auditor}"
                  [routerLink]="['/auditorias/editar', auditor.id]"
                >
                </p-button>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>

    </p-panel>
</div>